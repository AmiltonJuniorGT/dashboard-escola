<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KPIs — Painel Executivo</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="top">
      <div class="titleBox">
        <h1>KPIs — Painel Executivo</h1>
        <div class="sub">Clique em um card para abrir a análise.</div>
      </div>
      <div id="status" class="status">Iniciando…</div>
    </header>

    <section class="controls card">
      <div class="row">
        <div class="field">
          <label>Unidade (Aba)</label>
          <select id="unitSelect"></select>
        </div>

        <div class="field">
          <label>Período — Início</label>
          <input id="dateStart" type="date" />
        </div>

        <div class="field">
          <label>Período — Fim</label>
          <input id="dateEnd" type="date" />
        </div>

        <div class="field">
          <label>Tabela</label>
          <select id="tableMode">
            <option value="interval" selected>Intervalo</option>
            <option value="full">Completa</option>
          </select>
        </div>

        <div class="field actions">
          <button id="btnLoad" class="btn">Carregar</button>
          <button id="btnApply" class="btn btnPrimary">Aplicar</button>
        </div>
      </div>

      <div class="meta">
        <div><b>Unidade:</b> <span id="metaUnit">—</span></div>
        <div><b>Período:</b> <span id="metaPeriod">—</span></div>
        <div><b>Mês base:</b> <span id="metaBaseMonth">—</span></div>
        <div class="hint" id="hintBox"></div>
      </div>
    </section>

    <section class="grid" id="kpiGrid">
      <!-- cards entram via JS -->
    </section>

    <section class="tableCard card">
      <div class="tableActions">
        <div class="pill" id="tblInfo">—</div>
        <button class="btn" id="btnExpand">Expandir</button>
      </div>
      <div class="tableWrap" id="tableWrap">
        <table id="kpiTable"></table>
      </div>
    </section>
  </div>

  <!-- Drawer (painel lateral) -->
  <div class="drawerBackdrop" id="drawerBackdrop"></div>

  <aside class="drawer" id="drawer">
    <div class="drawerHeader">
      <div>
        <div class="drawerTitle" id="drawerTitle">—</div>
        <div class="drawerSub" id="drawerSub">—</div>
      </div>
      <button class="iconBtn" id="drawerClose" aria-label="Fechar">✕</button>
    </div>

    <div class="drawerBody">
      <div class="drawerKpis">
        <div class="dCard">
          <div class="dLabel">Mês base</div>
          <div class="dValue" id="d_base">—</div>
        </div>
        <div class="dCard">
          <div class="dLabel">Mês anterior</div>
          <div class="dValue" id="d_prev">—</div>
        </div>
        <div class="dCard">
          <div class="dLabel">Ano anterior</div>
          <div class="dValue" id="d_yoy">—</div>
        </div>
        <div class="dCard">
          <div class="dLabel">Δ vs mês</div>
          <div class="dValue" id="d_mom">—</div>
        </div>
        <div class="dCard">
          <div class="dLabel">Δ vs ano</div>
          <div class="dValue" id="d_yoy_pct">—</div>
        </div>
      </div>

      <div class="drawerSection">
        <div class="drawerSectionTitle">Últimos 12 meses</div>
        <canvas id="spark" width="520" height="120"></canvas>
        <div class="drawerTableWrap">
          <table class="drawerTable" id="drawerTable"></table>
        </div>
      </div>

      <div class="drawerSection" id="drawerBreakdownBox" style="display:none;">
        <div class="drawerSectionTitle">Detalhamento (T / P)</div>
        <div class="breakGrid" id="drawerBreakdown"></div>
      </div>

      <div class="drawerSection mutedSmall">
        Próximo passo (quando você quiser): cruzamentos e gráficos por “Comercial / Financeiro / Marketing” em abas.
      </div>
    </div>
  </aside>

  <!-- cache-buster pra não ficar preso no antigo -->
  <script src="app.js?v=20260215-05"></script>
</body>
</html>
